<div class="topnav" id="myTopnav">
	<div class="container">
		<a href="javascript:void(0);" class="menu_icon" onclick="openNav()">
			<i class="material-icons-outlined"> menu</i> 
		</a>

		<a href="javascript:void(0);" class="close_icon" onclick="closeNav()">
			<i class="material-icons-outlined"> close</i> 
		</a>

		<div class="nav_logo">
			<div class="rounded">
				<%= link_to (image_tag(("favicon.ico"))), image_path(url_for(("favicon.ico"))), rel: "gallery" , :href => root_path%>
			</div>
		</div>

		<%if user_signed_in?%>
			<div class="nav_user_login_moblie" >
				<div class="user_notification_mobile">
					<%= link_to user_path(current_user, :tab => "NotificationID") do %>
						<%if current_user.user_notifications.count < 10%>
							<i class="material-icons-outlined">notifications</i><span><%=current_user.user_notifications.count%></span>
						<%else%>
							<i class="material-icons-outlined">notifications</i><span>9+</span>
						<%end%>
					<%end%>
				</div>

				<button class="user_avatar_small_header_moblie" onclick="openUserActionMenuMoblie()">
					<%if current_user.avatar?%>
						<div class="user_avatar_small_img_header_moblie">
							<%= image_tag current_user.avatar.url %>
						</div>
					<%else%>
						<div class="user_avatar_small_img_header_moblie">
							<%= image_tag("defaults/user_avatar_default.png")%>
						</div>
					<%end%>
				</button>

				<div class="user_action_select_mobile" id ="user_action_menu_moblie">
					<div class="user_action_mobile">
						<%= link_to user_profile_path, :method => :get do%>
							<i class="material-icons-outlined">badge</i><span>Hồ sơ tìm việc</span>
						<%end%>
					</div>
					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'SaveJobID'), :method => :get do%>
							<i class="material-icons-outlined">bookmark_border</i><span>Việc làm đã lưu</span>
						<%end%>
					</div>
					
					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'ApplyJobID'), :method => :get do%>
							<i class="material-icons-outlined">check</i><span>Việc làm đã ứng tuyển</span>
						<%end%>
					</div>
					
					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'CompanyFollowID'), :method => :get do%>
							<i class="material-icons-outlined">favorite_border</i><span>Công ty đang theo dõi</span>
						<%end%>
					</div>

					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'ProblemID'), :method => :get do%>
							<i class="material-icons-outlined">lightbulb</i><span>Câu hỏi của tôi</span>
						<%end%>
					</div>

					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'CoverVitaeID'), :method => :get do%>
							<i class="material-icons-outlined">content_copy</i><span>CV của tôi</span>
						<%end%>
					</div>

					<div class="user_action_mobile">
						<%= link_to user_path(current_user, tab: 'PersonalID'), :method => :get do%>
							<i class="material-icons-outlined">account_circle</i><span>Thông tin cá nhân</span>
						<%end%>
					</div>

					<div class="user_action_mobile">
						<%= link_to edit_user_path(current_user), :method => :get do%>
							<i class="material-icons-outlined">settings</i><span>Cài đặt tài khoản</span>
						<%end%>
					</div>

					<div class="user_action_mobile">
						<button class="dropdown-item" type="button" class="btn" data-toggle="modal" data-target="#buttonModalHeaderCenterMobile">
							<i class="material-icons-outlined">logout</i><span>Đăng xuất</span>
						</button>
					</div>	
				</div>

				<!-- Modal -->
				<div class="modal fade" id="buttonModalHeaderCenterMobile" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Bạn có chắc chắn muốn đăng xuất không?</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="nav_header_user_action_mobile">
									<%= button_to destroy_user_session_path, method: :delete do%>
										<i class="material-icons-outlined">logout</i><span>Có, đăng xuất ngay bây giờ</span>
									<%end%>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		<%elsif employer_signed_in?%>
			<div class="nav_employer_login_moblie" >
				<div class="employer_notification_mobile">
					<%= link_to employer_path(current_employer, :tab => "NotificationID") do %>
						<%if current_employer.employer_notifications.count < 10%>
							<i class="material-icons-outlined">notifications</i><span><%=current_employer.employer_notifications.count%></span>
						<%else%>
							<i class="material-icons-outlined">notifications</i><span>9+</span>
						<%end%>
					<%end%>
				</div>

				<button class="employer_avatar_small_header_moblie" onclick="openEmployerActionMenuMoblie()">
					<%if current_employer.avatar?%>
						<div class="employer_avatar_small_img_header_moblie">
							<%= image_tag current_employer.avatar.url %>
						</div>
					<%else%>
						<div class="employer_avatar_small_img_header_moblie">
							<%= image_tag("defaults/user_avatar_default.png")%>
						</div>
					<%end%>
				</button>

				<div class="employer_action_select_mobile" id ="employer_action_menu_moblie">
					<div class="employer_action_mobile">
						<%= link_to employer_path(current_employer, tab: 'PersonalID'), :method => :get do%>
							<i class="material-icons-outlined">space_dashboard</i><span>Bảng điều khiển</span>
						<%end%>
					</div>

					<div class="employer_action_mobile">
						<%= link_to edit_employer_path(current_employer), :method => :get do%>
							<i class="material-icons-outlined">settings</i><span>Cài đặt tài khoản</span>
						<%end%>
					</div>

					<div class="employer_action_mobile">
						<a class="dropdown-item" type="button" class="btn" data-toggle="modal" data-target="#buttonModalHeaderCenter">
							<i class="material-icons-outlined">logout</i><span>Đăng xuất</span>
						</a>
					</div>	
				</div>

				<!-- Modal -->
				<div class="modal fade" id="buttonModalHeaderCenterMobile" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog modal-dialog-centered" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Bạn có chắc chắn muốn đăng xuất không?</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="nav_header_employer_action_mobile">
									<%= button_to destroy_employer_session_path, method: :delete do%>
										<i class="material-icons-outlined">logout</i><span>Có, đăng xuất ngay bây giờ</span>
									<%end%>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		<%end%>

		<%if employer_signed_in?%>
			<div class="nav_main_menu">
				<a href="<%=employer_index_job_path %>"> Quản lý tin đăng </a>
				<a href="<%=employer_index_apply_path %>"> Quản lý hồ sơ ứng tuyển </a>
				<a href="<%=employer_index_cv_path %>"> Tìm kiếm ứng viên </a>
				<a href="<%=employer_plan_path %>">Đổi gói dịch vụ</a>
				<a href="<%=contact_us_path%>">Liên hệ </a>
			</div>
		<%elsif admin_signed_in?%>
			<div class="nav_main_menu">
				<a href="<%=admin_path(current_admin, tab: 'AdminJobApprovingID') %>">Việc làm chờ duyệt</a>
				<a href="<%=admin_path(current_admin, tab: 'AdminProblemApprovingID') %>">Câu hỏi chờ duyệt</a>
				<a href="<%=rails_admin_path%>"> Pro Dashboard</a>
			</div>
		<%else%>
			<div class="nav_main_menu">
				<a href="<%=jobs_search_path %>">Việc làm </a>
				<a href="<%=companies_path %>">Review công ty </a>
				<a href="<%=user_profile_path %>">Tạo hồ sơ tìm việc</a>
				<a href="<%=problems_path %>">Câu hỏi phỏng vấn </a>
				<!--<a href="<%=cover_vitaes_path %>">CV & Resume </a>-->
				<a href="<%=posts_path %>">Blog</a>
			</div>
		<%end%>

		<div class="nav_right">
			<%if user_signed_in?%>
				<div class="nav_user">
					<div class="user_notification">						
						<%= link_to user_path(current_user, :tab => "NotificationID") do %>
							<i class="material-icons-outlined">notifications</i>
						<%end%>
						<%if current_user.user_notifications.count < 10%>
							<span><%=current_user.user_notifications.count%></span>
						<%else%>
							<span>9+</span>
						<%end%>
					</div>

					<button class="user_avatar_small_header" type="button" id="dropdownUserMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<%if current_user.avatar?%>
							<div class="user_avatar_small_img_header">
								<%= image_tag current_user.avatar.url %>
							</div>
						<%else%>
							<div class="user_avatar_small_img_header">
								<%= image_tag("defaults/user_avatar_default.png")%>
							</div>
						<%end%>
					</button>

					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownUserMenuButton">
						<a class="dropdown-item" href="<%=user_profile_path%>">
							<i class="material-icons-outlined">badge</i><span>Hồ sơ tìm việc</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'SaveJobID')%>">
							<i class="material-icons-outlined">bookmark_border</i><span>Việc làm đã lưu</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'ApplyJobID')%>">
							<i class="material-icons-outlined">check</i><span>Việc làm đã ứng tuyển</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'CompanyFollowID')%>">
							<i class="material-icons-outlined">favorite_border</i><span>Công ty đang theo dõi</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'ProblemID')%>">
							<i class="material-icons-outlined">lightbulb</i><span>Câu hỏi của tôi</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'CoverVitaeID')%>">
							<i class="material-icons-outlined">content_copy</i><span>CV của tôi</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=user_path(current_user, tab: 'PersonalID')%>">
							<i class="material-icons-outlined">account_circle</i><span>Thông tin cá nhân</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=edit_user_path(current_user)%>">
							<i class="material-icons-outlined">settings</i><span>Cài đặt tài khoản</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" type="button" class="btn" data-toggle="modal" data-target="#buttonModalHeaderCenter">
							<i class="material-icons-outlined">logout</i><span>Đăng xuất</span>
						</a>
					</div>
					<!-- Modal -->
					<div class="modal fade" id="buttonModalHeaderCenter" tabindex="-1" role="dialog" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Bạn có chắc chắn muốn đăng xuất không?</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<div class="nav_header_user_action">
										<%= button_to destroy_user_session_path, method: :delete do%>
											<i class="material-icons-outlined">logout</i><span>Có, đăng xuất ngay bây giờ</span>
										<%end%>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			<%elsif employer_signed_in?%>
				<div class="nav_employer">
					<div class="employer_notification">						
						<%= link_to employer_employer_notifications_path(current_employer) do %>
							<%if current_employer.employer_notifications.count < 10%>
								<i class="material-icons-outlined">notifications</i><span><%=current_employer.employer_notifications.count%></span>
							<%else%>
								<i class="material-icons-outlined">notifications</i><span>9+</span>
							<%end%>
						<%end%>
					</div>

					<button class="employer_avatar_small" type="button" id="dropdownemployerMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<%if current_employer.avatar?%>
							<div class="employer_avatar_small_img">
								<%= image_tag current_employer.avatar.url %>
							</div>
						<%else%>
							<div class="employer_avatar_small_img">
								<%= image_tag("defaults/user_avatar_default.png")%>
							</div>
						<%end%>
					</button>

					<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownemployerMenuButton">
						<a class="dropdown-item" href="<%=employer_path(current_employer)%>">
							<i class="material-icons-outlined">space_dashboard</i><span>Bảng điều khiển</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="<%=edit_employer_path(current_employer)%>">
							<i class="material-icons-outlined">settings</i><span>Cài đặt tài khoản</span>
						</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" type="button" class="btn" data-toggle="modal" data-target="#buttonModalHeaderCenter">
							<i class="material-icons-outlined">logout</i><span>Đăng xuất</span>
						</a>
					</div>
					<!-- Modal -->
					<div class="modal fade" id="buttonModalHeaderCenter" tabindex="-1" role="dialog" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Bạn có chắc chắn muốn đăng xuất không?</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<div class="nav_header_employer_action">
										<%= button_to destroy_employer_session_path, method: :delete do%>
											<i class="material-icons-outlined">logout</i><span>Có, đăng xuất ngay bây giờ</span>
										<%end%>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			<%elsif admin_signed_in?%>
				<%= button_to destroy_admin_session_path, method: :delete, class: "nav_admin_logout" do%>
					<a> Đăng xuất </a>
				<%end%>
			<%else%>
				<a class="nav_recrui" href="<%=employer_wellcome_path%>">
					Tuyển dụng
				</a>
				<a class="nav_login" href="<%=new_user_session_path%>">
					Đăng nhập
				</a>
			<%end%>
		</div>
	</div>
</div>

<script>
	function openNav() {
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive";
		} else {
			x.className = "topnav";
		}
	}

	function closeNav() {
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive";
		} else {
			x.className = "topnav";
		}
	}

	function openUserActionMenuMoblie() {
		var x = document.getElementById("user_action_menu_moblie");
		if (x.style.display == "block") 
		{
			x.style.display = "none";
		} 
		else 
		{
			x.style.display = "block";
		}
	}

	function openEmployerActionMenuMoblie() {
		var x = document.getElementById("employer_action_menu_moblie");
		if (x.style.display == "block") 
		{
			x.style.display = "none";
		} 
		else 
		{
			x.style.display = "block";
		}
	}
</script>
