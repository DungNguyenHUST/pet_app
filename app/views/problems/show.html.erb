<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    </head>

    <body>
        <%- model_class = Problem -%>
            <div class="problem_area">
                <div class="col-sm-6">
                    <div class="problem_area_left">
                        <div class="tab_link">
                            <ul class="nav nav-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#ProblemDescriptionID"><i class="material-icons">content_paste</i>Mô tả</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#ProblemSolutionID"><i class="material-icons">check_circle_outline</i>Giải pháp<span> <%= @problem.problem_solutions.count%><span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#ProblemDiscusstionID"><i class="material-icons">people_outline</i>Thảo luận</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" data-toggle="tab" href="#ProblemYourSolutionID"><i class="material-icons">perm_identity</i>Giải pháp của bạn</a>
                                </li>
                            </ul>
                        </div>

                        <div class="tab-content">
                            <div role="tabpanel" id="ProblemDescriptionID" class="tab-pane fade in active"><br>
                                <div class="problem_des_tab">
                                    <%= render :partial => 'problems/description' %>
                                </div>
                            </div>

                            <div role="tabpanel" id="ProblemSolutionID" class="tab-pane fade in active"><br>
                                <div class="problem_solution_tab">
                                    <%= render @problem.problem_solutions %>
                                </div>
                            </div>

                            <div role="tabpanel" id="ProblemDiscusstionID" class="tab-pane fade in active"><br>
                            </div>

                            <div role="tabpanel" id="ProblemYourSolutionID" class="tab-pane fade in active"><br>
                            </div>
                        </div>
                    </div>
                    <script type="text/javascript">
                        $(function() { 
                            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                                localStorage.setItem('lastTab', $(this).attr('href'));
                            });

                            var lastTab = localStorage.getItem('lastTab');
                            if (lastTab) {
                                $('[href="' + lastTab + '"]').tab('show');
                            }
                        });
                    </script>
                </div>

                <div class="col-sm-6">
                    <div class="problem_area_right">
                        <div class="problem_submit">
                            <div class="new_problem_solution_right_form">
                                <%= form_for [@problem, ProblemSolution.new] do |f| %>
                                    <div class="new_problem_solution_right_title">
                                        <a>Câu trả lời của bạn</a>
                                    </div>

                                    <div class="new_problem_solution_right_section">
                                        <div class="new_problem_solution_right_content">
                                            <div class="new_problem_solution_right_label_title">
                                                <a><%= f.label :title, "Tiêu đề*", class: "new_problem_solution_right_label_name" %></a>
                                            </div>

                                            <div class="new_problem_solution_right_input_review_title">
                                                <%= f.text_field :title, class: "form-control", placeholder: "  Nhập tiêu đề" %>
                                            </div>

                                            <div class="new_problem_solution_right_label">
                                                <a><%= f.label :solution_rich, "Giải pháp chính*", class: "new_problem_solution_right_label_name" %></a>
                                            </div>

                                            <div class="new_problem_solution_right_input_review">
                                                <%= f.rich_text_area :solution_rich, class: "form-control", placeholder: "  Nhập nội dung trả lời" %>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="new_problem_solution_right_submit_button">
                                        <%= f.submit "Gửi trả lời", class: "new_problem_solution_right_form_submit" %>
                                    </div>
                                <%end%>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
