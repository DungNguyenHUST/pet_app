<!-- problem_solutions container -->
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
    </head>

    <body>
        <div class="user_problem_solution_block">
            <div class="user_problem_solution_left">
                <div class="user_avatar">
                    <i class="material-icons-outlined">perm_identity</i>
                </div>

                <%if logged_in?%>
                    <% pre_vote = problem_solution.problem_vote_solutions.find { |vote| vote.user_id == current_user.id} %>
                    <% if pre_vote %>  
                        <%= link_to '<button class="problem_solution_like_highlight"><i class="material-icons-outlined">arrow_drop_up</i></button>'.html_safe, problem_problem_solution_problem_vote_solution_path(@problem, problem_solution, pre_vote), method: :delete%>
                    <%else%>
                        <%= link_to '<button class="problem_solution_like"><i class="material-icons-outlined">arrow_drop_up</i></button>'.html_safe, problem_problem_solution_problem_vote_solutions_path(@problem, problem_solution), method: :post%>
                    <%end%>
                <%else%>
                    <%= link_to '<button class="problem_solution_like"><i class="material-icons-outlined">arrow_drop_up</i></button>'.html_safe, login_path%>
                <%end%>

                <div class="problem_solution_like_info">
                    <a><%= problem_solution.problem_vote_solutions.count%></a>
                </div>

                <%if logged_in?%>
                    <% pre_unvote = problem_solution.problem_unvote_solutions.find { |unvote| unvote.user_id == current_user.id} %>
                    <% if pre_unvote %>
                        <%= link_to '<button class="problem_solution_dislike_highlight"><i class="material-icons-outlined">arrow_drop_down</i></button>'.html_safe, problem_problem_solution_problem_unvote_solution_path(@problem, problem_solution, pre_unvote), method: :delete%>
                    <%else%>
                        <%= link_to '<button class="problem_solution_dislike"><i class="material-icons-outlined">arrow_drop_down</i></button>'.html_safe, problem_problem_solution_problem_unvote_solutions_path(@problem, problem_solution), method: :post%>
                    <%end%>
                <%else%>
                    <%= link_to '<button class="problem_solution_dislike"><i class="material-icons-outlined">arrow_circle_down</i></button>'.html_safe, login_path%>
                <%end%>
            </div>

            <div class="user_problem_solution_cotent">
                <div class="user_problem_solution_body">
                    <a><%= problem_solution.content_rich_text %></a>
                </div>

                <div class="problem_solution_info">
                    <div class="problem_solution_info">
                        <div class="problem_solution_toolbar">
                            <a><%= problem_solution.problem_reply_solutions.count%></a>
                            <button class="reply_btn" onclick="myFunctionReplyproblem_solution()"><i class="material-icons-outlined">chat_bubble_outline</i> Trả lời </button>
                        </div>
                    </div>

                    <div class="user_problem_solution_time">
                        <a><%= problem_solution.user_name %> . <%= time_ago_in_words(problem_solution.created_at) %></a>
                    </div>
                </div>
            </div>

            <div class="new_reply_problem_solution_form" id = "mydivproblem_solution">
                <%= form_for [@problem, problem_solution, ProblemReplySolution.new] do |f| %>

                    <div class="new_reply_problem_solution_content">
                        <div class="new_reply_problem_solution_input_problem_solution">
                            <%= f.text_area :reply_content, class: "new_reply_problem_solution_form_input_problem_solution", placeholder: "Gửi trả lời" %>
                        </div>
                    </div>

                    <div class="new_reply_problem_solution_submit">
                        <button type="submit" class="new_reply_problem_solution_form_submit">
                            <i class="material-icons-outlined">send</i>
                        </button>
                    </div>
                <%end%>
            </div>

            <script>
                function myFunctionReplyproblem_solution() {
                    var x = document.getElementById("mydivproblem_solution");
                    if (x.style.display == "none") {
                        x.style.display = "block";
                    } else {
                        x.style.display = "none";
                    }
                }
            </script>

            <div class="reply_problem_solution_content">
                <%if problem_solution.problem_reply_solutions.count > 0%>
                    <%# <button class="show_hide_reply_btn_show" onclick="myFunctionReplyproblem_solutionShowHide()"><i class="material-icons-outlined">keyboard_arrow_down</i></button> %>
                    <%# <button class="show_hide_reply_btn_hide" onclick="myFunctionReplyproblem_solutionShowHide()"><i class="material-icons-outlined">keyboard_arrow_up</i></button> %>
                    <div class="problem_solution_reply" id = "mydivShowHide">
                        <%= render problem_solution.problem_reply_solutions %>
                    </div>
                <%end%>
                <script>
                    function myFunctionReplyproblem_solutionShowHide() {
                        // var x = document.getElementById("mydivShowHide");
                        // if (x.style.display == "none") {
                        //     x.style.display = "block";
                        // } else {
                        //     x.style.display = "none";
                        // }
                    }
                </script>
            </div>
        </div>
    </body>
</html>